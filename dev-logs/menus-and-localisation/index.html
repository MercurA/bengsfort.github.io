<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width initial-scale=1">
	
		<title>Menus and Localisation</title>
	
		<!--// Metadata //-->
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width initial-scale=1">
	
		<!--// Metadata //-->
		<meta name="description" content="Words and thoughts about app development, indie game development, and pixel art.">
		<meta property="og:type" content="website">
		<meta property="og:title" content="Developmental Pixels">
		<meta property="og:url" content="http://aesinv.com/index.html">
		<meta property="og:site_name" content="Developmental Pixels">
		<meta property="og:description" content="Words and thoughts about app development, indie game development, and pixel art.">
		<meta name="twitter:card" content="summary">
		<meta name="twitter:title" content="Developmental Pixels">
		<meta name="twitter:description" content="Words and thoughts about app development, indie game development, and pixel art.">
		<meta name="twitter:creator" content="@bengsfort">
		<meta property="fb:admins" content="100000177595822">
		<meta property="fb:app_id" content="1893256420958255">
		
	
		<!--// Ads //-->
		<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
		<script>
		(adsbygoogle = window.adsbygoogle || []).push({
			google_ad_client: "ca-pub-7029788304714937",
			enable_page_level_ads: true
		});
		</script>
		
		<!--// Stylesheets //-->
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<link href="/styles/main.css" rel="stylesheet">
		<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/atom-one-dark.min.css">
	</head>
	<body>
		<header>
			<a class="nav-menu-trigger waves-effect waves-light" data-target=".nav-pane">
				<i class="material-icons close">close</i>
				<i class="material-icons open">menu</i>
			</a>
			<div class="nav-pane">
				<div class="nav-content">
					<div class="author-card">
						<div class="author-card-top">
							<div class="author-avatar-wrapper">
								<img class="author-avatar" src="/assets/avatar.png" alt="Matt Bengston" />
							</div>
						</div>
					
						<div class="author-card-body">
							<h5 class="author-name">Matt Bengston</h5>
							
							<div class="author-job-info">
								<span class="author-position">Software Developer</span>
								<a class="author-employer" target="_blank" href="https://unity3d.com">Unity Technologies</a>
							</div>
					
							<div class="author-social">
								<a class="author-github" target="_blank" href="https://github.com/bengsfort">
									<svg class="icon icon-github-with-circle">
										<use xlink:href="#icon-github-with-circle" />
									</svg>
								</a>
								<a class="author-twitter" target="_blank" href="https://twitter.com/bengsfort">
									<svg class="icon icon-twitter-with-circle">
										<use xlink:href="#icon-twitter-with-circle" />
									</svg>
								</a>
							</div>
						</div>
					</div>			<nav id="site-navigation">
						<ul class="site-nav">
								<li >
									<a href="/" class="waves-effect">All Posts</a>
								</li>
								<li >
									<a href="/articles/" class="waves-effect">Articles</a>
								</li>
								<li class="active">
									<a href="/dev-logs/" class="waves-effect">Dev Logs</a>
								</li>
								<li >
									<a href="/pixel-art/" class="waves-effect">Pixel Art</a>
								</li>
								<li >
									<a href="/about/" class="waves-effect">About</a>
								</li>
						</ul>
					</nav>		</div>
				<div class="nav-footer">
					<span class="copyright-info"><i class="tiny material-icons">copyright</i> Matt Bengston</span>
					<span class="source-info"><a href="https://github.com/bengsfort/bengsfort.github.io" target="_blank"><i class="tiny material-icons">code</i> View on Github</a></span>
				</div>	</div>
		</header>
		<main class="main-wrapper">
			<div class="container">
				<section class="intro-text">
					<h1 class="headline">Menus and Localisation</h1>
						<span class="subtitle">Continuing on the gameplay coding hiatus with some menu creation and a dash of localisation.</span>
						<span class="series">This post is part of an ongoing series about Flying is Hard.</span>
				</section>				<p>With the first iteration of in-game UI behind me I decided to continue my gameplay programming break and try to get a prototype main menu made up so the project would feel more like an actual game. Even though it&#39;s a prototype menu I wanted it to feel cohesive with the stuff that&#39;s already been done, so I tried whipping together a title screen logo using the same colour palette and assets.</p>
<center>
<img src="/assets/menus-and-localisation/flying-is-hard-logo.png" alt="Flying is Hard logo">
</center>

<p>I&#39;m actually quite pleased with it and may keep the concept for this logo around but will probably end up changing up the typography. From there I needed to set up the rest of the menu structure, and for this mostly placeholder iteration decided to keep it super basic and didn&#39;t really spend any time on design outside of moving some text around within Unity. I used the same colour palette and fonts I&#39;ve been using throughout the project to tie everything together.</p>
<p><img src="/assets/menus-and-localisation/menus.png" alt="Menus"></p>
<p>While this is a quick prototype menu I do want it to be the foundation of the final menu design, so I tried placing things in a pleasing way. My vision for the final menu includes one of the worlds in the background with a slight blur/frosted glass overlay for some ambience, so I tried positioning things with that in mind.</p>
<p>Even though technically that was all I needed to do, I couldn&#39;t help but want to spice it up a bit. So with spiciness in mind I added some basic transitions to the different navigation states and threw some localisation into the mix.</p>
<div class="streamable-container" style="max-width: 260px;">
    <div style="width:100%;height:0px;position:relative;padding-bottom:177.867%;"><iframe src="https://streamable.com/s/555dd/tqgmse" frameborder="0" width="100%" height="100%" allowfullscreen style="width:100%;height:100%;position:absolute;left:0px;top:0px;overflow:hidden;"></iframe></div>
</div>

<p>I made the transitions using the in-editor Animator, so those are pretty basic. The localisation wasn&#39;t too hard to add either, and actually kind of fun to implement. I have an <code>enum</code> of languages I can support, then that <code>enum</code> gets stored in a localisation manager as well as player prefs for cross-session persistence. From there, each translatable string gets assigned a <code>MonoBehaviour</code> that pulls the active language from the localisation manager on initialization and subscribes to a <code>LanguageChanged</code> event that is exposed by the localisation manager. Whenever the player switches languages it then updates Player prefs and dispatches a <code>LanguageChanged</code> event to all translatable strings with the new active language.</p>
<pre><code class="hljs csharp"><span class="hljs-comment">// LocalisationText</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">FlyingIsHard.Assets.Bengsfort.Localisation.Components</span>
{
    <span class="hljs-comment">// @<span class="hljs-doctag">todo:</span> this should be managed better and should maybe read from a json or </span>
    <span class="hljs-comment">// xml file with word/phrase lookups so that it isn't handled per-object in-editor.</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">LocalisationText</span> : <span class="hljs-title">MonoBehaviour</span>
    {
        <span class="hljs-comment">// The UI label</span>
        <span class="hljs-keyword">public</span> Text label;
        <span class="hljs-comment">// Essentially a multi-dimensional array of strings + language ID</span>
        <span class="hljs-keyword">public</span> LocalisedString[] options;
        <span class="hljs-comment">// Dictionary of strings for easier lookup</span>
        <span class="hljs-keyword">private</span> Dictionary&lt;AvailableLanguages, <span class="hljs-keyword">string</span>&gt; m_StringDict = <span class="hljs-keyword">new</span> Dictionary&lt;AvailableLanguages, <span class="hljs-keyword">string</span>&gt;();

        <span class="hljs-comment">// Subscribe to the LocalisationManager on awake and build the string dictionary</span>
        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Awake</span>(<span class="hljs-params"></span>)
        </span>{
            <span class="hljs-comment">// Subscribe to change events</span>
            LocalisationManager.languageChanged += OnLanguageChanged;
            <span class="hljs-comment">// Build the dictionary of strings</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; options.Length; i++)
                m_StringDict.Add(options[i].language, options[i].content);
        }

        <span class="hljs-comment">// Update the label on start</span>
        <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Start</span>(<span class="hljs-params"></span>)
        </span>{
            UpdateLabelWithLanguage(LocalisationManager.GetCurrentLanguage());
        }

        <span class="hljs-comment">// Update the label whenever the language gets changed</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">OnLanguageChanged</span>(<span class="hljs-params"><span class="hljs-keyword">object</span> sender, LanguageChangedEventArgs e</span>)
        </span>{
            UpdateLabelWithLanguage(e.activeLanguage);
        }

        <span class="hljs-comment">// Update the label based on a new language</span>
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">UpdateLabelWithLanguage</span>(<span class="hljs-params">AvailableLanguages language</span>)
        </span>{
            label.text = m_StringDict.ContainsKey(language)
                ? m_StringDict[lang]
                : m_StringDict[AvailableLanguages.English];
        }
    }
}</code></pre>

<p>The core functionality of the localisation manager works, but the current translatable strings implementation isn&#39;t very scalable as it requires me to put every translation on every instance of text, which is very error prone. What I will end up doing is hooking the translatable strings up to some sort of dictionary that will have all of the translations for a given text ID, that way I only have to update one file as opposed to a lot of individual game objects.</p>
<p>Aaaaand cut! Stay tuned for more Flying is Hard logs, and maybe follow along on twitter <a href="https://twitter.com/bengsfort">@bengsfort</a>.</p>

			</div>
		</main>

		<svg style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
		  <defs>
		    <symbol id="icon-github-with-circle" viewBox="0 0 20 20">
		      <title>github-with-circle</title>
		      <path class="path1" d="M10.015 9.949c0 0-0.010 0-0.015 0h-0.015c-1.191 0-2.24-0.303-2.861 0.268-0.371 0.342-0.527 0.754-0.527 1.197 0 1.852 1.483 2.080 3.389 2.080h0.029c1.905 0 3.389-0.229 3.389-2.080 0-0.443-0.156-0.856-0.527-1.197-0.622-0.571-1.671-0.268-2.862-0.268zM8.393 12.48c-0.363 0-0.656-0.408-0.656-0.91s0.293-0.908 0.656-0.908c0.363 0 0.657 0.406 0.657 0.908s-0.293 0.91-0.657 0.91zM11.606 12.48c-0.363 0-0.657-0.408-0.657-0.91s0.294-0.908 0.657-0.908c0.362 0 0.656 0.406 0.656 0.908s-0.293 0.91-0.656 0.91zM10 0.4c-5.302 0-9.6 4.298-9.6 9.6s4.298 9.6 9.6 9.6 9.6-4.298 9.6-9.6-4.298-9.6-9.6-9.6zM10.876 13.939c-0.172 0-0.514 0-0.876 0.002-0.362-0.002-0.704-0.002-0.876-0.002-0.76 0-3.772-0.059-3.772-3.689 0-0.834 0.286-1.445 0.755-1.955-0.074-0.184-0.078-1.232 0.32-2.236 0 0 0.916 0.1 2.301 1.051 0.289-0.081 0.781-0.122 1.272-0.122s0.982 0.041 1.273 0.121c1.385-0.951 2.301-1.051 2.301-1.051 0.398 1.004 0.395 2.053 0.32 2.236 0.469 0.51 0.755 1.121 0.755 1.955-0.001 3.632-3.013 3.69-3.773 3.69z"></path>
		    </symbol>
		    <symbol id="icon-twitter-with-circle" viewBox="0 0 20 20">
		      <title>twitter-with-circle</title>
		      <path class="path1" d="M10 0.4c-5.302 0-9.6 4.298-9.6 9.6s4.298 9.6 9.6 9.6 9.6-4.298 9.6-9.6-4.298-9.6-9.6-9.6zM13.905 8.264c0.004 0.082 0.005 0.164 0.005 0.244 0 2.5-1.901 5.381-5.379 5.381-1.068 0-2.062-0.312-2.898-0.85 0.147 0.018 0.298 0.025 0.451 0.025 0.886 0 1.701-0.301 2.348-0.809-0.827-0.016-1.525-0.562-1.766-1.312 0.115 0.021 0.233 0.033 0.355 0.033 0.172 0 0.34-0.023 0.498-0.066-0.865-0.174-1.517-0.938-1.517-1.854v-0.023c0.255 0.141 0.547 0.227 0.857 0.237-0.508-0.34-0.841-0.918-0.841-1.575 0-0.346 0.093-0.672 0.256-0.951 0.933 1.144 2.325 1.896 3.897 1.977-0.033-0.139-0.049-0.283-0.049-0.432 0-1.043 0.846-1.891 1.891-1.891 0.543 0 1.035 0.23 1.38 0.598 0.431-0.086 0.835-0.242 1.2-0.459-0.141 0.441-0.44 0.812-0.831 1.047 0.383-0.047 0.747-0.148 1.086-0.299-0.253 0.379-0.574 0.713-0.943 0.979z"></path>
		    </symbol>
		  </defs>
		</svg>
		<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
		<script type="text/javascript" src="/js/bin/materialize.min.js"></script>
		<script type="text/javascript">
			var trigger = $('.nav-menu-trigger'),
				target = $(trigger.data('target'));
			
			trigger.on('click', function() {
				trigger.toggleClass('active');
				target.toggleClass('in');
			});
		</script>		<script>
		  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		
		  ga('create', 'UA-66600710-1', 'auto');
		  ga('send', 'pageview');
		</script>
	</body>
</html>